# Images

In order to provide more flexibility in the handling of images, we provide a
way of handling images using a special image tag:

	\{{img:<filename>[(<title>)][|<parameter>[,<parameter>]]}}

The `(<title>)` and `<parameter>` sections are optional.

The optional parameters are comma seperated key:value pairs, and must be valid Docbook
imagedata attributes[^imagedata].

	\{{img:<filename>[(<title>)]|scalefit:1,width:50%,valign:middle}}

If no parameter values are provided then the Docbook stylesheet defaults will
be used.

**Note:** Due to the way we embed Docbook XML in the merged Markdown source,
Pandoc is unable to correctly include this XML in `<para>` blocks, so if you
need to ensure that images are contained in their own blocks, you will have to
force them:

	<para>\{{img:kitty_sniper.jpg|scalefit:1,width:25%}}</para>

Will result in:

<para>{{img:kitty_sniper.jpg|scalefit:1,width:25%}}</para>

## Image Scaling

If an image is smaller than the page width, then it is usualy better to not
scale with the width option, and if the image is larger you'll want to scale
it down. However without getting out the calculator it can be difficault to
determine in advance if an image will fit on the page without scaling.

For this purpose a custom parameter was added `scaledownonly`.  Which will do
the right thing.

This small image will not be scaled up (and will center align):

	<para>\{{img:small.jpg|width:100%,scaledownonly:1,align:center}}</para>

<para>{{img:small.jpg|width:100%,scaledownonly:1,align:center}}</para>

Compared with this large image, which will be scaled down to fit in the page:

	<para>\{{img:large.jpg|width:100%,scaledownonly:1,align:center}}</para>

<para>{{img:large.jpg|width:100%,scaledownonly:1,align:center}}</para>

[^imagedata]: http://www.docbook.org/tdg/en/html/imagedata.html
